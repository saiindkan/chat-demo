<!DOCTYPE html>
<html>
<head>
  <title>Sample Vellum Chat</title>
</head>
<body>
  <div id="chat-area"></div>
  <input id="chat-input" type="text" placeholder="Type your message..." />
  <button onclick="sendMessage()">Send</button>

  <script>
    const apiKey = "67CnW4Jt.Ch2vt0gWL1Katc2CmBSkvdvASryWfE7G";
    const deployment = "kind-lending-customer-assistant";
    let chatHistory = [];

    async function sendMessage() {
      const input = document.getElementById("chat-input").value;
      chatHistory.push({sender: "user", message: input});
      document.getElementById("chat-area").innerHTML += `<div>User: ${input}</div>`;

      const response = await fetch("https://api.vellum.ai/v1/execute-workflow", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${apiKey}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          deployment,
          message: input,
          chat_history: chatHistory
        })
      });
      const data = await response.json();
      chatHistory.push({sender: "bot", message: data.response});
      document.getElementById("chat-area").innerHTML += `<div>Bot: ${data.response}</div>`;
      document.getElementById("chat-input").value = '';
    }
  </script>
</body>
</html>
